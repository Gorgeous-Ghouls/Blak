#:kivy 2.1.0

#:import Colors app.utils.Colors
#:import get_color_from_hex kivy.utils.get_color_from_hex

MDBoxLayout:
    orientation: 'vertical'
    md_bg_color: get_color_from_hex(Colors.primary_bg.value)
    TitleBar:
        id: titlebar

    ScreenManager:
        id: app_screen_manager
        MDScreen:
            name: "login"
            LoginScreen:
        MDScreen:
            name: "app"
            MDBoxLayout:
                MDFloatLayout: # needed so that we always have background color
                    md_bg_color: get_color_from_hex(Colors.accent_bg.value)
                    size_hint_x: 0.4
                    ScrollView:
                        do_scroll_x: False
                        MDGridLayout:
                            cols: 1
                            id: chat_list_container
                            size_hint: 1,None
                            height: self.minimum_height
                            spacing: dp(5)
                            md_bg_color: get_color_from_hex(Colors.accent_bg.value)
                            # to add chat here use ChatItem class from UI
                    MDFlatButton:
                        size_hint: 1, None
                        pos_hint: {'center_x': 0.5}
                        theme_text_color: "Custom"
                        md_bg_color: Colors.get_kivy_color("primary_bg")
                        text_color:  Colors.get_kivy_color("accent_bg_text")
                        text: "Logout"
                        on_release: app.do_logout()


                ScreenManager:
                    id: chats_screen_manager
                    size_hint: 1,1
                    MDScreen: # make this a class so this can be added dynamically see ChatItem class
                        name: 'chat' # name should be equal to custom-id of the other user
                        MDGridLayout:
                            cols:1
                            height: self.minimum_height
                            ScrollView:
                                MDList: # messages come above the input field not below
                                    id: chat_list
                                    spacing: "30dp"
#                                    OneLineListItem:   # uncomment for testing ðŸ˜€
#                                        text: "Single-line item"
                            MDGridLayout:
                                #:set padding "10dp"  # you can set variable in kvlang
                                padding: padding, 0, padding, padding # left top right, bottom
                                adaptive_height: True
                                rows: 1
                                MDTextField:
                                    hint_text: 'Enter your message'
                                    hint_text_font: 'Inria Sans'
                                MDFloatingActionButton:
                                    icon: "arrow-right"
                                    md_bg_color: get_color_from_hex(Colors.accent_bg.value)
