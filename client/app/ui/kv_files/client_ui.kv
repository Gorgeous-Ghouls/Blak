#:kivy 2.1.0

#:import Colors app.utils.Colors
#:import get_color_from_hex kivy.utils.get_color_from_hex
<TitleBar>:
    size_hint: 1,None
    height: dp(30)
    pos_hint: {'top':1}

    MDLabel:
        size: self.texture_size
        center_y: root.center_y
        text: app.title
        x:root.x + 10
        halign: 'left'
        theme_text_color: "Custom"
        text_color: get_color_from_hex(Colors.text_medium.value)


    MDBoxLayout:
        draggable: False
        adaptive_width: True
        pos_hint: {'right': 1}
        center_y: root.center_y
        orientation: 'horizontal'
        md_bg_color: root.button_bg
        MDIconButton:
            icon: "window-maximize"
            icon_size: root.button_size
            on_press: root.handle_buttons(self)
        MDIconButton:
            icon: "window-minimize"
            icon_size: root.button_size
            on_press: root.handle_buttons(self)
        MDIconButton:
            icon: "close"
            icon_size: root.button_size
            on_press: root.handle_buttons(self)

MDBoxLayout:
    orientation: 'vertical'
    TitleBar:
        id: titlebar

    ScreenManager:
        id: app_screen_manager
        MDScreen:
            name: "login"
            LoginScreen:
        MDScreen:
            name: "app"
            MDBoxLayout:
                MDFloatLayout: # needed so that we always have background color
                    md_bg_color: get_color_from_hex(Colors.accent_bg.value)
                    size_hint_x: 0.4
                    ScrollView:
                        do_scroll_x: False
                        MDGridLayout:
                            cols: 1
                            id: chat_list_container
                            size_hint: 1,None
                            height: self.minimum_height
                            spacing: dp(5)
                            md_bg_color: get_color_from_hex(Colors.accent_bg.value)
                            # to add chat here use ChatItem class from UI

                ScreenManager:
                    id: chats_screen_manager
                    MDScreen:
                        id: chat_screen
                        name: 'chat'
                        MDBoxLayout:
                            pos_hint: {'top': 1}
                            MDTextField:
                                id: chat_text_field
                                hint_text: 'Enter your message'
                                hint_text_font: 'Inria Sans'
                                pos_hint: {"bottom": 0.8, "center_y": .37}
                            MDFloatingActionButton:
                                icon: "arrow-right"
                                pos_hint: {"center_x": .5, "center_y": .12}
                                md_bg_color: get_color_from_hex(Colors.accent_bg.value)
                        MDList:
                            id: chat_list
                            size_hint_y: None
                            height: self.minimum_height
                            spacing: dp(5)
                            md_bg_color: get_color_from_hex(Colors.accent_bg.value)
